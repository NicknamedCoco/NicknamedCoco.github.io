<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="NicknamedCoco"><meta name="copyright" content="NicknamedCoco"><meta name="generator" content="Hexo 6.2.0"><meta name="theme" content="hexo-theme-yun"><title>Vue学习之基础原理上篇 | CocoBlog</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.3.3/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/@unocss/runtime/mini.global.js"></script><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/png" href="https://cdn.wanyiai.com/blog/bg/keyi.ico"><link rel="mask-icon" href="https://cdn.wanyiai.com/blog/bg/keyi.ico" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"wanyiai.com","root":"/","title":["Coco","Coding"],"version":"1.10.2","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"local_search":{"path":"/search.xml"},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false,"src":"/js/search/local-search.js"},"fireworks":{"colors":null},"waline":{"config":{"enable":true,"serverURL":"https://waline.wanyiai.com","comment":true,"placeholder":"要文明评论哦, 不然会被打屁屁","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"lang":"zh-cn","visitor":false,"comment_count":true,"emoji":["https://fastly.jsdelivr.net/gh/walinejs/emojis@latest/bilibili/","https://fastly.jsdelivr.net/gh/walinejs/emojis@latest/weibo/","https://fastly.jsdelivr.net/gh/walinejs/emojis@latest/qq/"],"locale":{"placeholder":"填写邮箱，可以收到回复通知哦～","requiredFields":["nick"]},"QMSG_KEY":"29c69c9f11f0812041673f0693f04a4b","QQ_ID":506579631,"AUTHOR_EMAIL":"one.dayinaug@gmail.com","SITE_NAME":"CocoBlog","SITE_URL":"wanyiai.com","SMTP_SERVICE":"Gmail","SMTP_USER":"one.dayinaug@gmail.com","SMTP_PASS":"tgy153rfvhu14863","SMTP_SECURE":false,"el":"#waline"},"cdn":"https://fastly.jsdelivr.net/npm/@waline/client@v2/dist/waline.js","dark":"html.dark"},"vendors":{"darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><meta name="description" content="近况  本来打算10月份学cloud，但是找到特别好的vue网课总不能不学吧，比之前的网课新了很多，发现vue中有很多内容还不懂，所以具体什么时间学完vue，开始去学cloud还不清楚，定个小目标，10月15号之前，学完那个网课并且写几篇关于vue3的博客吧，学一个技术就应该扎稳脚步，不能急功近燥，下面是我了解的一些关于vue的基本原理，就当个记录吧。  v-for中key的原理 Vue监测数据">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue学习之基础原理上篇">
<meta property="og:url" content="https://wanyiai.com/2021/09/24/Vue%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86%E4%B8%8A%E7%AF%87/index.html">
<meta property="og:site_name" content="CocoBlog">
<meta property="og:description" content="近况  本来打算10月份学cloud，但是找到特别好的vue网课总不能不学吧，比之前的网课新了很多，发现vue中有很多内容还不懂，所以具体什么时间学完vue，开始去学cloud还不清楚，定个小目标，10月15号之前，学完那个网课并且写几篇关于vue3的博客吧，学一个技术就应该扎稳脚步，不能急功近燥，下面是我了解的一些关于vue的基本原理，就当个记录吧。  v-for中key的原理 Vue监测数据">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.wanyiai.com/blog/vue/v-for%E4%B8%ADkey%E7%9A%84%E5%8E%9F%E7%90%86.png">
<meta property="og:image" content="https://cdn.wanyiai.com/blog/vue/v-for%E4%B8%ADkey%E7%9A%84%E5%8E%9F%E7%90%862.png">
<meta property="og:image" content="https://cdn.wanyiai.com/blog/vue/vue%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86.png">
<meta property="og:image" content="https://cdn.wanyiai.com/blog/vue/vue%E7%9B%91%E6%B5%8B%E6%95%B0%E6%8D%AE.png">
<meta property="og:image" content="https://cdn.wanyiai.com/blog/vue/vue%E7%9B%91%E6%B5%8B%E6%95%B0%E6%8D%AE2.png">
<meta property="og:image" content="https://cdn.wanyiai.com/blog/vue/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png">
<meta property="og:image" content="https://cdn.wanyiai.com/blog/vue/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F2.jpg">
<meta property="og:image" content="https://cdn.wanyiai.com/blog/vue/%E4%B8%80%E4%B8%AA%E9%87%8D%E8%A6%81%E7%9A%84%E5%85%B3%E7%B3%BB.png">
<meta property="article:published_time" content="2021-09-24T12:36:23.000Z">
<meta property="article:modified_time" content="2022-09-10T06:22:23.981Z">
<meta property="article:author" content="NicknamedCoco">
<meta property="article:tag" content="vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.wanyiai.com/blog/vue/v-for%E4%B8%ADkey%E7%9A%84%E5%8E%9F%E7%90%86.png"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button" data-target="post-toc-wrap" title="文章目录"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button sidebar-nav-active" data-target="site-overview-wrap" title="站点概览"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel sidebar-panel-active" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="NicknamedCoco"><img width="96" loading="lazy" src="https://cdn.wanyiai.com/blog/bg/keyi.jpg" alt="NicknamedCoco"></a><div class="site-author-name"><a href="/about/">NicknamedCoco</a></div><a class="site-name" href="/about/site.html">CocoBlog</a><sub class="site-subtitle">OneForAll</sub><div class="site-description">寻找自己的价值，才是生命的意义</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="我的主页"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">125</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">8</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">80</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="留言板"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://wpa.qq.com/msgrd?v=3&amp;uin=506579631&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#12B7F5"><span class="icon iconify" data-icon="ri:qq-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/NicknamedCoco" title="GitHub" target="_blank" style="color:#1da1f2"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/NicknamedCoco/" title="知乎" target="_blank" style="color:#0084FF"><span class="icon iconify" data-icon="ri:zhihu-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/NicknamedCoco" title="Twitter" target="_blank" style="color:#1da1f2"><span class="icon iconify" data-icon="ri:twitter-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content">此文章未包含目录</div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://wanyiai.com/2021/09/24/Vue%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86%E4%B8%8A%E7%AF%87/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="NicknamedCoco"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="CocoBlog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Vue学习之基础原理上篇</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="创建时间：2021-09-24 20:36:23" itemprop="dateCreated datePublished" datetime="2021-09-24T20:36:23+08:00">2021-09-24</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="修改时间：2022-09-10 14:22:23" itemprop="dateModified" datetime="2022-09-10T14:22:23+08:00">2022-09-10</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="本文字数">4.7k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="阅读时长">17m</span></span></span><span class="post-meta-divider">-</span><a href="#comment"><span class="post-meta-item-icon" title="评论数"><span class="icon iconify" data-icon="ri:chat-3-line"></span> <span class="waline-comment-count" id="/2021/09/24/Vue%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86%E4%B8%8A%E7%AF%87/"></span></span></a><div class="post-classify"><span class="post-tag"><a class="tag-item" href="/tags/vue/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">vue</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><blockquote>
<p>近况</p>
</blockquote>
<p>本来打算10月份学cloud，但是找到特别好的vue网课总不能不学吧，比之前的网课新了很多，发现vue中有很多<br>内容还不懂，所以具体什么时间学完vue，开始去学cloud还不清楚，定个小目标，10月15号之前，学完那个网课<br>并且写几篇关于vue3的博客吧，学一个技术就应该扎稳脚步，不能急功近燥，下面是我了解的一些关于vue的<br>基本原理，就当个记录吧。</p>
<ul>
<li><a href="#a">v-for中key的原理</a></li>
<li><a href="#b">Vue监测数据的原理</a></li>
<li><a href="#c">生命周期函数</a></li>
<li><a href="#d">组件与Vue原型对象的关系</a></li>
<li><a href="#e">render函数</a></li>
</ul>
<blockquote>
<p><span id="a">v-for中key的原理</span></p>
</blockquote>
<p>我们都知道，使用v-for遍历元素时，在标签上应该加上key属性，并且key属性必须要是唯一的，这是为什么呢？<br>下面是一段代码关于v-for使用：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"addPerson"</span><span class="token operator">></span>点击增加老刘<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
  <span class="token operator">&lt;</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"p in arr"</span><span class="token operator">></span>
      <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>p<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token operator">-</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>p<span class="token punctuation">.</span>age<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
  <span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    el<span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      arr<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>id<span class="token operator">:</span> <span class="token string">'001'</span><span class="token punctuation">,</span>name<span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>id<span class="token operator">:</span> <span class="token string">'002'</span><span class="token punctuation">,</span>name<span class="token operator">:</span> <span class="token string">'李四'</span><span class="token punctuation">,</span>age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>id<span class="token operator">:</span> <span class="token string">'003'</span><span class="token punctuation">,</span>name<span class="token operator">:</span> <span class="token string">'王五'</span><span class="token punctuation">,</span>age<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">&#125;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token function">addPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>id<span class="token operator">:</span> <span class="token string">'004'</span><span class="token punctuation">,</span>name<span class="token operator">:</span> <span class="token string">'老刘'</span><span class="token punctuation">,</span>age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>

<p>这里我没给li标签加上key属性，则Vue会自动给li标签加上key属性，且属性值是数组的index，如果单纯的展示<br>数组的数据没有问题，但是如果对数组进行了修改，并且打断了原来的index顺序，就会造成错误，什么意思呢？<br>你最开始遍历数组，张三，李四，王五，生成三个li标签，每个标签，Vue给你增加了一个key属性，属性值是index<br>所以张三这个标签key为0，李四是1，王五是2，后来你点击了按钮，为数组增加了新的元素，并且放在数组最前面<br>这就导致，新增的老刘是0，张三是1，李四是2，王五是3，这就叫做打乱了原有的index顺序，这种方式会产生一些错误！<br>下面有张图，可以看到具体的错误：<br><img src="https://cdn.wanyiai.com/blog/vue/v-for%E4%B8%ADkey%E7%9A%84%E5%8E%9F%E7%90%86.png" loading="lazy"></p>
<p>当我们点击新增数据之前，我们在每个标签的input中输入对应的值，但是当我们新增数据后，发现新增的老刘的<br>input框后有张三的数据，并且下面的数据都不正常了，这显然是不对的，我们希望新增老刘后的input是空的<br>所以为什么会存在这种错误呢？</p>
<p><strong>key的原理</strong>：key是用来给Vue做标识的，即给标签加上个唯一标识，可以认为是id，Vue拿到原来数据，<br>首先会根据数据生成一个虚拟DOM，页面上看到的标签是真实DOM，虚拟DOM是放在内存中，虚拟DOM中<br>就会使用到key，标识虚拟DOM的每一个标签，然后<strong>虚拟DOM会转成真实DOM</strong>，从而被我们看得到，<br>当我们遍历时没有指定key，或者key=index时，新增数据老刘后生成的新虚拟DOM中key值就会更改，<br><strong>key值的主要作用就是用于新虚拟DOM与旧虚拟DOM对比，决定是生成新真实DOM还是复用旧真实DOM</strong>，<br>例如老刘的key是0，会找到key为0的旧虚拟DOM即张三，对比虚拟DOM内部，老刘与张三不相等，生成新的真实DOM即老刘<br>而新虚拟DOM中存在input，此时旧虚拟DOM张三中也有input，则会复用旧虚拟DOM中input的旧真实DOM<br>因为旧虚拟DOM生成过一整套真实DOM，所以将张三后面的input对应的input旧真实DOM拿过去复用，<br>所以我们看到老刘-30后面是张三的input框，并且其中的数据还在，这里的数据是旧真实DOM中的，后面几个input框错用也是如此。</p>
<p>总结一下：</p>
<pre class="language-none"><code class="language-none">在本案例中，
	新虚拟DOM就是根据增加后的数据所生成的虚拟DOM，而根据新虚拟DOM生成的自然是新真实DOM
	旧虚拟DOM就是根据原来数据生成的虚拟DOM，而根据旧虚拟DOM生成的自然是旧真实DOM
key就是虚拟DOM的标识，或者说id，根据新虚拟DOM的key找到相同的旧虚拟DOM，然后对比其中的内容
如果内容相同，则复用对应的旧真实DOM，如果内容不相同，则生成新真实DOM</code></pre>

<p>下面是一张图片总结：<br><img src="https://cdn.wanyiai.com/blog/vue/v-for%E4%B8%ADkey%E7%9A%84%E5%8E%9F%E7%90%862.png" loading="lazy"></p>
<blockquote>
<p><span id="b">Vue监测数据的原理</span></p>
</blockquote>
<p>Vue是如何做到响应式的，说的就是Vue响应式原理或者说v-model原理，这常常在面试中被问到，<br>Vue实现响应式得做到两点：</p>
<ul>
<li>Vue是如何知道数据被改变了？说的就是Vue是怎么监测数据的，即本小节所要讲的原理</li>
<li>Vue是怎么更新页面的，vue需要知道哪些DOM使用到了被修改的数据，并及时更新这些DOM<br>而没有被修改数据的DOM页面不需要更改，这说的是发布订阅原理，留在以后讲。</li>
</ul>
<p>Vue2监测数据通过<code>Object.definedProperty</code>方法，通过该方法我们可以监测到对其他对象的属性的读改操作<br>这被称为数据劫持，即，只要别人读取修改这个数据，我们能拦截到，当然数据劫持在另一个角度来看也像<br>数据代理，下面看看具体代码：</p>
<pre class="language-none"><code class="language-none">&lt;script&gt;
  let data &#x3D; &#123;
    name: &#39;万一&#39;,
    age: 23
  &#125;
  let _data &#x3D; &#123;&#125;
  Object.defineProperty(_data,&#39;name&#39;,&#123;
    get()&#123;
      return data.name
    &#125;,
    set(val)&#123;
        data.name&#x3D;val
    &#125;
  &#125;)
  console.log(_data)
  &#x2F;*
    输出结果如下：
      name: （…）
      get name: ƒ get()
      set name: ƒ set(val)
      [[Prototype]]: Object
   *&#x2F;
&lt;&#x2F;script&gt;
&#x2F;*
	当我们通过Object.definedProperty给_data对象中新增name属性时，我们同样给这个name属性增加getter和setter方法，
	从打印_data对象就可以看到，确实有getter和setter方法，其次在getter中返回data的name数据，
	setter中将修改数据写到data对象的name中，这就使得_data中的name属性和data中的name属性存在了关联，
	这种通过修改_data中name的值达到修改data中name的值，就叫做数据代理
	我们获取data中name只需要通过_data.name实现，我们修改data中name只需要通过_data.name&#x3D;&quot;xxx&quot;这就是数据代理，
	数据代理也被叫做数据劫持，因为我们可以在_data中name的getter和setter方法中做一些其他的事，相当于劫持了对data的读改操作。
*&#x2F;</code></pre>

<p>同理，Vue中也存在数据代理或者说数据劫持，我们的数据作为属性放在data对象中，而这里面的数据都会被<br>放到Vue实例的<code>_data</code>属性中，并且每一个属性都有getter和setter方法，不仅如此，为了方便我们使用<br>Vue将<code>_data</code>属性中的数据又做了一层代理，将<code>_data</code>中数据全部作为了Vue实例的属性，以后我们每次修改<br>Vue实例的数据就相当于修改<code>_data</code>属性中的数据，修改<code>_data</code>属性中的数据就相当于修改data的数据<br>下面有一张数据代理或者说数据劫持的图片：<br><img src="https://cdn.wanyiai.com/blog/vue/vue%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86.png" loading="lazy"></p>
<p>上图中省略了setter和getter方法，通过代理，我们直接在浏览器按f12，输入<code>vm.name=&quot;万一&quot;</code>，就能修改掉原来<br>data中的name数据，因为数据被最终代理到Vue的实例上，我们在模板中使用<code>&#123;&#123;name&#125;&#125;</code>，就能访问到data中的<br>值，不然只做一层代理的话，你需要<code>&#123;&#123;_data.name&#125;&#125;</code>才能访问得到data中的name值，显然简化了很多。<br>至此，Vue就是通过这种方式去监测data数据的，不管是访问还是修改data数据，都会调用到Vue中getter和<br>setter方法，在这两个方法里可以做一些发布和订阅的事，这个之后再讲，总之现在data中数据都是响应式的了<br>因为被代理后，都有了相应的getter和setter方法，但是有些时候，data中的数据并不是响应式的。</p>
<p>在某些情况下，data中数据不是响应式：</p>
<ul>
<li><p>当Vue实例创建完毕，你动态向data的属性中增加某个属性时，则该属性不是响应式的，例如：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//初始数据：</span>
data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  message<span class="token operator">:</span><span class="token string">'加油!'</span><span class="token punctuation">,</span>
  student<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">'wanyi'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">23</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//你中途给school新增属性：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>student<span class="token punctuation">.</span>sex<span class="token operator">=</span><span class="token string">'男'</span>

你会发现你新增数据成功了，但打开_data中数据一看，sex属性并没有getter和setter方法
这说明该属性并不是响应式，直接影响是虽然数据更新了，但页面<span class="token constant">DOM</span>中用到school<span class="token punctuation">.</span>sex的地方没有任何变化

注意点：
	<span class="token number">1</span><span class="token punctuation">)</span>在模板中通过<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>time<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>访问data中的直接属性，如果没有time属性则程序直接报错
		如果通过<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>school<span class="token punctuation">.</span>sex<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>访问data属性的属性，即school的不存在的属性却并不报错。
	<span class="token number">2</span><span class="token punctuation">)</span>在Vue初始化完毕后，你不能中途向data中增加直接属性，你可以给data的属性增加属性
  	但是这个新增的属性如果是向上面的方式添加，则这个属性不是响应式的，即没有getter和setter方法</code></pre>
</li>
<li><p>直接修改data中数组中的元素，而不通过指定方法修改数组，会使用修改后的元素不是响应式的，例如：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"p in persons"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"p.id"</span><span class="token operator">></span>
      <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>p<span class="token punctuation">.</span>name<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token operator">-</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>p<span class="token punctuation">.</span>age<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token operator">-</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>p<span class="token punctuation">.</span>sex<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
	<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    el<span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      message<span class="token operator">:</span><span class="token string">'加油!'</span><span class="token punctuation">,</span>
      persons<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>name<span class="token operator">:</span> <span class="token string">'周杰伦'</span><span class="token punctuation">,</span>age<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>id<span class="token operator">:</span> <span class="token string">'001'</span><span class="token punctuation">,</span>sex<span class="token operator">:</span> <span class="token string">'男'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>name<span class="token operator">:</span> <span class="token string">'马冬梅'</span><span class="token punctuation">,</span>age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>id<span class="token operator">:</span> <span class="token string">'002'</span><span class="token punctuation">,</span>sex<span class="token operator">:</span> <span class="token string">'女'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>name<span class="token operator">:</span> <span class="token string">'周冬雨'</span><span class="token punctuation">,</span>age<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>id<span class="token operator">:</span> <span class="token string">'003'</span><span class="token punctuation">,</span>sex<span class="token operator">:</span> <span class="token string">'女'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>name<span class="token operator">:</span> <span class="token string">'胡歌'</span><span class="token punctuation">,</span>age<span class="token operator">:</span> <span class="token number">35</span><span class="token punctuation">,</span>id<span class="token operator">:</span> <span class="token string">'004'</span><span class="token punctuation">,</span>sex<span class="token operator">:</span> <span class="token string">'男'</span><span class="token punctuation">&#125;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>

<p>当我们中途修改数组中元素时，则修改后的元素并不是响应式的，没有被数据代理，直接影响是，虽然你修改了数据<br>但是页面没有响应修改，下面是一张修改数据的过程：<br><img src="https://cdn.wanyiai.com/blog/vue/vue%E7%9B%91%E6%B5%8B%E6%95%B0%E6%8D%AE.png" loading="lazy"></p>
</li>
</ul>
<p>那么如何才能使得中途新增的属性(该新增的属性不能是data的直接属性)是响应式的呢？如何使得修改数组中元素是响应式的呢？<br><strong>对于中途新增属性</strong>，我们可以使用<code>Vue.set()</code>方法，或者<code>app.$set</code>，这两者是等同的，使用方法如下：</p>
<pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Vue</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>propertyName<span class="token operator">/</span>index<span class="token punctuation">,</span>value<span class="token punctuation">)</span>
app<span class="token punctuation">.</span>$<span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>propertyName<span class="token operator">/</span>index<span class="token punctuation">,</span>value<span class="token punctuation">)</span></code></pre>

<p>测试原始数据还是和上面新增对象属性的例子一样，下面是使用上面两个方法响应式增加属性：</p>
<p><img src="https://cdn.wanyiai.com/blog/vue/vue%E7%9B%91%E6%B5%8B%E6%95%B0%E6%8D%AE2.png" loading="lazy"><br>注意：在浏览器控制台中直接使用<code>app.$set</code>，<code>app.student</code>使用，如果是在methods中，这里的app就是this。</p>
<p><strong>对于修改数据属性</strong>：我们可以通过调用这7个方法修改数组的元素，这样才能使得修改后的元素是响应式的<br>这七个方法分别是：<code>push(),pop(),shift(),unshift().splice(),sort(),reverse()</code><br>值得注意的是，这7个方法都是Vue包装后的方法，并不是原生数组方法，通过包装原生数组方法，增加getter，setter方法<br>除了使用这7个方法修改数组的元素，你也可以使用上面两个方法：<code>Vue.set()或app.$set()</code>修改数组元素。</p>
<p>最后有一个悲伤的事，在Vue3中Vue.set和app.$set都被弃用了，连上面监测属性使用的Object.definedProperty方法也被弃用了。</p>
<blockquote>
<p><span id="c">生命周期函数</span></p>
</blockquote>
<p>生命周期函数也叫钩子函数，顾名思义，我们写好钩子函数，等待vue去上钩，呸，等待vue去调用，<br>vue的生命周期分为创建，挂载，更新，销毁，四个阶段，分别对应8个钩子函数，下面是两张生命周期图片<br>我们在不同的钩子函数中可以做点不同的事情，当vue运行到了某个时期就去调用：<br><img src="https://cdn.wanyiai.com/blog/vue/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" loading="lazy"><br><img src="https://cdn.wanyiai.com/blog/vue/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F2.jpg" loading="lazy"></p>
<p>Vue中Dom的异步渲染</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>ul<span class="token operator">></span>
            <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"a in arr"</span><span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>a<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
        <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>sum<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../node_modules/vue/dist/vue.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
                 arr<span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
				<span class="token comment">// 如果在created改变数据，那么模板编译进行一次，如果在mounted中改数据，会再次编译模板 </span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> 
				<span class="token comment">/*
					在beforeMount之前编译模板，编译原有数据的3个li,存在内存中(形成虚拟DOM)
					当数据在beforeMount更新时，立即将内存中的模板(虚拟DOM)编译成4li
					最后挂载到真实的DOM上，不会引发beforeUpdate函数的调用
				*/</span>
              <span class="token comment">//this.arr=[1,2,3,4];</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            computed<span class="token operator">:</span><span class="token punctuation">&#123;</span>
                <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                    <span class="token comment">// 在挂载的过程中,执行的这个函数</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token number">100</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
          	<span class="token comment">/*
          		在mounted之前改数据，不会调用beforeUpdate这个函数
				进入mounted函数表示DOM已经挂载完毕
				如果在mounted函数中修改数据，则立即将内存中的模板编译成4li，再次把最新虚拟DOM挂载到真实的DOM上
				会引发beforeUpdate函数的调用
            */</span> 
            <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token comment">/*
                	VUE中DOM的更新是异步的
                	如何在mounted中操作最新的真实DOM呢？
					$nextTick需要传入一个回调函数，会当真实的DOM再次更新完成，会立即调用这个回调函数
                */</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
                    <span class="token keyword">let</span> oLis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oLis<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//4</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"beforeUpdate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre>



<p>还有另外三个钩子函数：activated，deactivated，errorCaptured，<br>讲这三个钩子函数就不得不讲vue中两个内置组件，component组件，keep-alive组件</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">component内置组件<span class="token operator">:</span> 每次能动态显示一个组件，当切换下一个组件时，当前组件要销毁
<span class="token function">也就是说，当组件被激活时</span><span class="token punctuation">(</span>被我们点击看到<span class="token punctuation">)</span><span class="token punctuation">,</span>组件执行Created函数，当组件失活时，调用destroy函数等
使用方式：<span class="token operator">&lt;</span>component is<span class="token operator">=</span>“组件名”<span class="token operator">></span>

keep<span class="token operator">-</span>alive<span class="token operator">:</span>用于缓存组件，如果该组件还会再启用，那么可以使用keep<span class="token operator">-</span>alive进行组件缓存和优化，提高性能
缓存的组件不需要销毁，也不需要再创建
使用方式：<span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive<span class="token operator">></span><span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span>“组件名”<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">></span>	<span class="token comment">//如果是动态属性，那么会去data中取值</span>
当然你也可以在路由中使用：<span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive<span class="token operator">></span><span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">></span></code></pre>

<p>activated和deactivated两个钩子函数在路由篇讲过，组件被缓存后，这两个钩子函数就代替了created和destroy<br>而errorCaptured则是当子孙组件出错时，会调用这个钩子函数，这个函数能接收三个参数：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">errorCaptured</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">/*	
		当捕获一个来自子孙组件的错误时被调用。此钩子会收到三个参数：
		错误对象、发生错误的组件实例以及一个包含错误来源信息的字符串。
		此钩子可以返回false，以阻止该错误继续向上传播。
  */</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>“子组件报错”<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>



<p>生命周期具体笔记：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">1</span>，生命周期函数中的<span class="token keyword">this</span>都是vue实例或者组件实例对象
<span class="token number">2</span>，除了更新阶段的钩子函数，其他钩子函数只执行一次
<span class="token number">3</span>，执行<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法销毁vue实例，直接执行beforeDestroy函数，再是destroyed函数
	在beforeDestroy函数中虽然可以操作数据，但不会触发更新操作了，没有回头路了
<span class="token number">4</span>，在mounted函数中通常用来发送ajax请求，启动定时器，绑定自定义事件，订阅消息等初始化操作
<span class="token number">5</span>，在beforeDestroy函数中通常用来清除定时器，解绑自定义事件，取消订阅消息等收尾工作
<span class="token number">6</span><span class="token function">，调用destroy销毁vue后，自定义事件会失效</span><span class="token punctuation">(</span>子组件向父组件通信<span class="token punctuation">)</span>，但原生<span class="token constant">DOM</span><span class="token function">事件依然有效</span><span class="token punctuation">(</span>click等自带的事件<span class="token punctuation">)</span></code></pre>



<blockquote>
<p><span id="d">组件与Vue原型对象的关系</span></p>
</blockquote>
<p>还记得我们是怎么创建一个组件的嘛？</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//方式1</span>
<span class="token keyword">let</span> mycon <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  template<span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      &lt;div>
      	&lt;h3>万一爱野马&lt;/h3>
      &lt;/div>
    </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
	拿到mycon组件，你可能会放到别的组件的component属性中，局部组件
	或者通过Vue.component('mycon',mycon);，注册全局组件
*/</span>

<span class="token comment">//方式2，或者你直接导入组件</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span></code></pre>

<p>以上我们拿到的mycon，App，都是组件，或者说都是VueComponent构造函数，但这两个VueComponent并不相等<br>当我们在模板中使用组件标签时，会根据VueComponent构造函数创建相应的组件实例对象，所以我们在组件中的this都是组件实例对象<br>说回来，标题中，组件与Vue原型对象有什么关系呢？下面看张图片：<br><img src="https://cdn.wanyiai.com/blog/vue/%E4%B8%80%E4%B8%AA%E9%87%8D%E8%A6%81%E7%9A%84%E5%85%B3%E7%B3%BB.png" loading="lazy"></p>
<p>这也就解释了，为什么我们通过<code>Vue.prototype.$xxx = xxx</code>后，我们在所有组件中都可以能拿到<code>this.$xxx</code><br>这里VueComponent原型对象相当于一个Vue实例，所以组件实例能拿到VueComponent原型对象中的数据<br>也能拿到Vue原型对象中的数据，解释完毕，华丽退场！</p>
<blockquote>
<p><span id="e">render函数</span></p>
</blockquote>
<p>我们在使用vue脚手架创建vue项目的时候，可能让你选择runtimeCompiler与runtimeOnly两种构建项目方式，<br>runtimeCompiler方法构建的vue项目允许你在app.vue中使用template属性，这种方式构建的项目。项目中引用<br>的vue内部包括了vue核心+模板解析器，模板解析器就是专门用来解析app.vue中的template属性的，<br>包含模板解析器的vue被称为完整版的vue，当我们输入<code>import Vue from &#39;vue&#39;</code>时，它引入<code>node_modules/vue/dist/vue.js</code>，<br>这个文件就是完整版的vue文件，当使用webpack打包vue项目时，自然是把vue包含的模板解析器打包了</p>
<p>而如果使用runtimeOnly方式构建项目，则使用render函数代替template属性项目中使用的vue，<br>它引入的vue文件是<code>node_modules/vue/dist/vue.runtime.esm.js</code>，这个vue文件不包含模板解析器，<br>所以当这个项目被webpack打包后，要比runtimeCompiler方法构建的vue项目打包后，小大概10KB，<br>render函数本质就是用来创建app标签元素的，作用和template一样。</p>
<p>总结：如果你的项目app.vue中需要使用template属性，使用runtimeCompiler方式构建项目<br>如果你的项目app.vue中使用render函数，则使用runtimeOnly方式构建项目</p>
</div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><span class="icon iconify" data-icon="ri:hand-coin-line"></span></span><div id="reward-comment">一分也是爱~~</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.wanyiai.com/blog/pay/alipay.jpg"><img loading="lazy" src="https://cdn.wanyiai.com/blog/pay/alipay.jpg" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.wanyiai.com/blog/pay/wechatpay.jpg"><img loading="lazy" src="https://cdn.wanyiai.com/blog/pay/wechatpay.jpg" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>NicknamedCoco</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://wanyiai.com/2021/09/24/Vue%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86%E4%B8%8A%E7%AF%87/" title="Vue学习之基础原理上篇">https://wanyiai.com/2021/09/24/Vue%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86%E4%B8%8A%E7%AF%87/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> 许可协议。</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2021/10/08/Vue%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86%E4%B8%8B%E7%AF%87/" rel="prev" title="Vue学习之基础原理下篇"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">Vue学习之基础原理下篇</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2021/09/19/Vue%E5%AD%A6%E4%B9%A0%E4%B9%8B%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE/" rel="next" title="Vue学习之项目配置"><span class="post-nav-text">Vue学习之项目配置</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>欢迎留下你的脚印~</span><br></div><div id="waline"></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@waline/client@v2/dist/waline.css"><script>window.CONFIG.waline.config.path = "/2021/09/24/Vue%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86%E4%B8%8A%E7%AF%87/"</script><div class="js-Pjax"><script src="/js/comments/waline.js" type="module" defer></script></div></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">赣ICP备2022005395号</a></div><div class="copyright"><span>&copy; 2019 – 2023 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> NicknamedCoco</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v6.2.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.10.2</span></div><div class="live-time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2020-09-22T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} 天 ${passHour} 小时 ${passMinute} 分 ${passSecond} 秒`;
}
blog_live_time();
</script></div><div class="footer-support"><span>本网站由</span><a class="footer-support-logo" href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral" target="blank" title="又拍云"><img height="30" src="https://cdn.yunyoujun.cn/img/logo/upyun-logo.png" alt="又拍云"></a><span>提供 CDN 加速/云存储服务</span></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://fastly.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div class="search-result-container"></div></div></body></html>